<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUthirsty - ÂñùÊ∞¥ÊâìÂç°APP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #87CEEB;
            --bg-secondary: #1a1f3a;
            --bg-card: rgba(255, 255, 255, 0.25);
            --accent-cyan: #00f5ff;
            --accent-blue: #4A90D9;
            --accent-purple: #9b59b6;
            --text-primary: #2c3e50;
            --text-secondary: #5a6c7d;
            --glow-cyan: 0 0 20px rgba(0, 245, 255, 0.5);
            --glow-blue: 0 0 30px rgba(74, 144, 217, 0.4);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: linear-gradient(180deg, #87CEEB 0%, #B0E0E6 40%, #E0F4FF 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* ‰∫ëÊúµËÉåÊôØ */
        .weather-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        /* ‰∫ëÊúµ */
        .cloud {
            position: absolute;
            background: white;
            border-radius: 50%;
            filter: blur(2px);
            opacity: 0.8;
            animation: cloud-float linear infinite;
        }

        .cloud::before,
        .cloud::after {
            content: '';
            position: absolute;
            background: white;
            border-radius: 50%;
        }

        @keyframes cloud-float {
            0% {
                transform: translateX(-300px);
            }
            100% {
                transform: translateX(calc(100vw + 300px));
            }
        }

        /* Â§™Èò≥ */
        .sun {
            position: absolute;
            top: 40px;
            right: 60px;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #FFD700 0%, #FFA500 70%, rgba(255, 165, 0, 0.3) 100%);
            border-radius: 50%;
            box-shadow: 0 0 60px rgba(255, 215, 0, 0.8);
            animation: sun-glow 3s ease-in-out infinite;
        }

        @keyframes sun-glow {
            0%, 100% {
                box-shadow: 0 0 60px rgba(255, 215, 0, 0.8);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 0 80px rgba(255, 215, 0, 1);
                transform: scale(1.05);
            }
        }

        /* Â∞è‰∫ëÊúµË£ÖÈ•∞ */
        .cloud-small {
            position: absolute;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50px;
            animation: cloud-drift ease-in-out infinite alternate;
        }

        @keyframes cloud-drift {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(20px);
            }
        }

        .app {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 0;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Â§¥ÈÉ®Ê†∑Âºè */
        .header {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
            backdrop-filter: blur(10px);
            padding: 20px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.5);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .title {
            text-align: center;
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #4A90D9, #87CEEB);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 1px;
        }

        .title-icon {
            font-size: 32px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .stats-container {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 12px 20px;
            text-align: center;
            min-width: 100px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-label {
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--accent-blue);
        }

        .stat-unit {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 3px;
        }

        /* ‰∏ªÂÜÖÂÆπÂå∫Âüü */
        .main-content {
            flex: 1;
            padding: 20px 15px;
            width: 100%;
            display: flex;
            flex-direction: column;
        }

        /* ÊâìÂç°Âå∫Âüü */
        .checkin-section {
            text-align: center;
            margin-bottom: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 400px;
        }

        .water-animation {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 25px;
        }

        .water-wave {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px solid #4A90D9;
            opacity: 0;
            animation: ripple 2s ease-out infinite;
        }

        .wave1 { animation-delay: 0s; }
        .wave2 { animation-delay: 0.5s; }
        .wave3 { animation-delay: 1s; }

        @keyframes ripple {
            0% {
                transform: scale(0.8);
                opacity: 0.6;
            }
            100% {
                transform: scale(1.5);
                opacity: 0;
            }
        }

        .checkin-btn {
            position: relative;
            width: 160px;
            height: 160px;
            margin: 0 auto 15px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #4A90D9 0%, #87CEEB 100%);
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 10px 40px rgba(74, 144, 217, 0.4);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px;
            overflow: hidden;
        }

        .checkin-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent,
                rgba(255, 255, 255, 0.1),
                transparent
            );
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .checkin-btn:active {
            transform: scale(0.95);
        }

        .btn-icon {
            font-size: 40px;
            filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.3));
        }

        .btn-text {
            font-size: 15px;
            font-weight: 600;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .last-checkin {
            color: var(--text-secondary);
            font-size: 13px;
            margin-top: 15px;
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 20px;
            display: inline-block;
            border: 1px solid rgba(255, 255, 255, 0.6);
        }

        /* ÂéÜÂè≤ËÆ∞ÂΩïÂå∫Âüü */
        .history-section {
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(74, 144, 217, 0.2);
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
            font-weight: 600;
            flex: 1;
            justify-content: center;
        }

        .title-line {
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, transparent, #4A90D9, transparent);
        }

        .title-text {
            padding: 0 15px;
            background: linear-gradient(135deg, #4A90D9, #87CEEB);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .clear-btn {
            background: transparent;
            border: 1px solid rgba(255, 100, 100, 0.5);
            color: #ff6b6b;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clear-btn:active {
            background: rgba(255, 100, 100, 0.2);
        }

        .history-list {
            max-height: 250px;
            overflow-y: auto;
        }

        .history-list::-webkit-scrollbar {
            width: 4px;
        }

        .history-list::-webkit-scrollbar-thumb {
            background: var(--accent-cyan);
            border-radius: 2px;
        }

        .history-group {
            margin-bottom: 15px;
        }

        .history-group:last-child {
            margin-bottom: 0;
        }

        .history-group-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            margin-bottom: 8px;
            background: rgba(74, 144, 217, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(74, 144, 217, 0.2);
        }

        .group-date {
            font-size: 11px;
            font-weight: 600;
            color: #4A90D9;
        }

        .group-count {
            font-size: 10px;
            color: var(--text-secondary);
            background: rgba(74, 144, 217, 0.1);
            padding: 2px 8px;
            border-radius: 10px;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.6);
            border-radius: 10px;
            padding: 8px 12px;
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .history-item:last-child {
            margin-bottom: 0;
        }

        .history-item-time {
            font-size: 12px;
            color: var(--text-primary);
            font-weight: 500;
        }

        .history-item-date {
            font-size: 9px;
            color: var(--text-secondary);
            margin-top: 2px;
        }

        .history-item-count {
            background: linear-gradient(135deg, #4A90D9, #87CEEB);
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 10px;
            font-weight: 600;
            box-shadow: 0 2px 10px rgba(74, 144, 217, 0.3);
        }

        /* Á©∫Áä∂ÊÄÅ */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
        }

        .empty-icon {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .empty-text {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .empty-hint {
            font-size: 13px;
            color: var(--text-secondary);
            opacity: 0.7;
        }

        /* Â∫ïÈÉ®Ê†∑Âºè */
        .footer {
            text-align: center;
            padding: 20px 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.3);
        }

        .footer-info {
            font-size: 12px;
            color: var(--text-secondary);
            opacity: 0.8;
        }

        /* ÊâìÂç°ÊàêÂäüÂä®Áîª */
        @keyframes successPulse {
            0%, 100% {
                box-shadow: 0 10px 40px rgba(74, 144, 217, 0.4);
            }
            50% {
                box-shadow: 0 10px 60px rgba(92, 191, 88, 0.8),
                            0 0 100px rgba(92, 191, 88, 0.4);
            }
        }

        .checkin-btn.success {
            animation: successPulse 0.6s ease;
            background: linear-gradient(135deg, #5CBF58 0%, #87CEEB 100%);
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #00a8ff, #00f5ff);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 5px 20px rgba(0, 168, 255, 0.4);
            z-index: 1000;
            animation: toastIn 0.3s ease;
        }

        @keyframes toastIn {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        @keyframes toastOut {
            from {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
            to {
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
        }
    </style>
</head>
<body>
    <!-- ‰∫ëÊúµÂ§©Ê∞îËÉåÊôØ -->
    <div class="weather-background" id="weatherBackground">
        <div class="sun"></div>
    </div>

    <div class="app">
        <!-- Â§¥ÈÉ®Âå∫Âüü -->
        <header class="header">
            <h1 class="title">
                <span class="title-icon">üíß</span>
                RUthirsty
            </h1>
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-label">‰ªäÊó•Â∑≤Âñù</div>
                    <div class="stat-value" id="todayCount">0</div>
                    <div class="stat-unit">ÊùØ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Á¥ØËÆ°Â§©Êï∞</div>
                    <div class="stat-value" id="totalDays">0</div>
                    <div class="stat-unit">Â§©</div>
                </div>
            </div>
        </header>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
        <main class="main-content">
            <!-- ÊâìÂç°ÊåâÈíÆÂå∫Âüü -->
            <section class="checkin-section">
                <div class="water-animation">
                    <div class="water-wave wave1"></div>
                    <div class="water-wave wave2"></div>
                    <div class="water-wave wave3"></div>
                </div>
                <button class="checkin-btn" id="checkinBtn">
                    <span class="btn-icon">üíß</span>
                    <span class="btn-text">ÊâìÂç°ÂñùÊ∞¥</span>
                </button>
                <div class="last-checkin" id="lastCheckin">
                    ‰∏äÊ¨°ÊâìÂç°: --
                </div>
            </section>

            <!-- ÂéÜÂè≤ËÆ∞ÂΩïÂå∫Âüü -->
            <section class="history-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="title-line"></span>
                        <span class="title-text">ÂéÜÂè≤ËÆ∞ÂΩï</span>
                        <span class="title-line"></span>
                    </h2>
                    <button class="clear-btn" id="clearBtn">Ê∏ÖÁ©∫</button>
                </div>
                <div class="history-list" id="historyList">
                    <div class="empty-state">
                        <div class="empty-icon">üìù</div>
                        <div class="empty-text">ÊöÇÊó†ÊâìÂç°ËÆ∞ÂΩï</div>
                        <div class="empty-hint">ÁÇπÂáª‰∏äÊñπÊåâÈíÆÂºÄÂßãÊâìÂç°ÂêßÔºÅ</div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Â∫ïÈÉ®‰ø°ÊÅØ -->
        <footer class="footer">
            <div class="footer-info">‰øùÊåÅÂÖÖË∂≥Ê∞¥ÂàÜÔºåÂÅ•Â∫∑ÊØè‰∏ÄÂ§©</div>
        </footer>
    </div>

    <script>
        // Êï∞ÊçÆÂ≠òÂÇ®
        let records = [];

        // DOM ÂÖÉÁ¥†
        const checkinBtn = document.getElementById('checkinBtn');
        const clearBtn = document.getElementById('clearBtn');
        const todayCountEl = document.getElementById('todayCount');
        const totalDaysEl = document.getElementById('totalDays');
        const lastCheckinEl = document.getElementById('lastCheckin');
        const historyListEl = document.getElementById('historyList');
        const weatherBackground = document.getElementById('weatherBackground');

        // ÂàùÂßãÂåñÂ§©Ê∞îËÉåÊôØ
        function initWeather() {
            // ÂàõÂª∫Â§ß‰∫ëÊúµ
            for (let i = 0; i < 8; i++) {
                const cloud = document.createElement('div');
                cloud.className = 'cloud';
                const width = Math.random() * 150 + 100;
                const height = width * 0.4;

                cloud.style.width = width + 'px';
                cloud.style.height = height + 'px';
                cloud.style.top = (Math.random() * 60 + 10) + '%';
                cloud.style.animationDuration = (Math.random() * 40 + 40) + 's';
                cloud.style.animationDelay = (Math.random() * 30) + 's';

                // Ê∑ªÂä†‰∫ëÊúµÁöÑÂúÜÂΩ¢ÈÉ®ÂàÜ
                cloud.style.boxShadow = `
                    ${width * 0.3}px ${height * 0.2}px 0 ${width * 0.15}px white,
                    ${width * 0.5}px ${height * 0.1}px 0 ${width * 0.2}px white,
                    ${width * 0.7}px ${height * 0.15}px 0 ${width * 0.12}px white
                `;

                weatherBackground.appendChild(cloud);
            }

            // ÂàõÂª∫Â∞è‰∫ëÊúµË£ÖÈ•∞
            for (let i = 0; i < 12; i++) {
                const smallCloud = document.createElement('div');
                smallCloud.className = 'cloud-small';
                const width = Math.random() * 80 + 40;
                const height = width * 0.35;

                smallCloud.style.width = width + 'px';
                smallCloud.style.height = height + 'px';
                smallCloud.style.left = Math.random() * 100 + '%';
                smallCloud.style.top = (Math.random() * 70 + 5) + '%';
                smallCloud.style.animationDuration = (Math.random() * 5 + 5) + 's';
                smallCloud.style.animationDelay = Math.random() * 3 + 's';
                smallCloud.style.opacity = Math.random() * 0.3 + 0.3;

                weatherBackground.appendChild(smallCloud);
            }
        }

        // ÂàùÂßãÂåñ
        function init() {
            initWeather();
            loadData();
            bindEvents();
        }

        // ÁªëÂÆö‰∫ã‰ª∂
        function bindEvents() {
            checkinBtn.addEventListener('click', handleCheckIn);
            clearBtn.addEventListener('click', handleClearHistory);
        }

        // Âä†ËΩΩÊï∞ÊçÆ
        function loadData() {
            try {
                const data = localStorage.getItem('waterRecords');
                if (data) {
                    records = JSON.parse(data);
                } else {
                    records = [];
                }
                updateStats();
                renderHistory();
            } catch (e) {
                console.error('ËØªÂèñËÆ∞ÂΩïÂ§±Ë¥•:', e);
                records = [];
            }
        }

        // ‰øùÂ≠òËÆ∞ÂΩï
        function saveRecords() {
            try {
                localStorage.setItem('waterRecords', JSON.stringify(records));
                return true;
            } catch (e) {
                console.error('‰øùÂ≠òËÆ∞ÂΩïÂ§±Ë¥•:', e);
                alert('‰øùÂ≠òÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•Â≠òÂÇ®Á©∫Èó¥');
                return false;
            }
        }

        // Â§ÑÁêÜÊâìÂç°
        function handleCheckIn() {
            const now = new Date();
            const record = {
                id: Date.now(),
                timestamp: now.getTime(),
                date: now.toLocaleDateString('zh-CN'),
                time: now.toLocaleTimeString('zh-CN', {
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                }),
                year: now.getFullYear(),
                month: now.getMonth() + 1,
                day: now.getDate()
            };

            // Ê∑ªÂä†Âà∞Êï∞ÁªÑÂºÄÂ§¥
            records.unshift(record);

            if (saveRecords()) {
                // ÊòæÁ§∫ÊàêÂäüÂä®Áîª
                showSuccessAnimation();
                // Êõ¥Êñ∞ÁïåÈù¢
                updateStats();
                renderHistory();
                // ÊòæÁ§∫ÊèêÁ§∫
                showToast('ÊâìÂç°ÊàêÂäüÔºÅüíß');
            }
        }

        // ÊòæÁ§∫ÊàêÂäüÂä®Áîª
        function showSuccessAnimation() {
            checkinBtn.classList.add('success');
            setTimeout(() => {
                checkinBtn.classList.remove('success');
            }, 600);
        }

        // Êõ¥Êñ∞ÁªüËÆ°Êï∞ÊçÆ
        function updateStats() {
            const today = new Date();
            const todayStr = today.toLocaleDateString('zh-CN');

            // ËÆ°ÁÆó‰ªäÊó•ÊâìÂç°Ê¨°Êï∞
            const todayRecords = records.filter(r => r.date === todayStr);
            todayCountEl.textContent = todayRecords.length;

            // ËÆ°ÁÆóÁ¥ØËÆ°ÊâìÂç°Â§©Êï∞ÔºàÂéªÈáçÔºâ
            const uniqueDays = new Set(records.map(r => r.date));
            totalDaysEl.textContent = uniqueDays.size;

            // Êõ¥Êñ∞‰∏äÊ¨°ÊâìÂç°Êó∂Èó¥
            if (records.length > 0) {
                const lastRecord = records[0];
                lastCheckinEl.textContent = `‰∏äÊ¨°ÊâìÂç°: ${lastRecord.date} ${lastRecord.time}`;
            } else {
                lastCheckinEl.textContent = '‰∏äÊ¨°ÊâìÂç°: --';
            }
        }

        // Ê∏≤ÊüìÂéÜÂè≤ËÆ∞ÂΩïÔºàÂè™ÊòæÁ§∫ÊúÄËøë10Ê¨°Ôºâ
        function renderHistory() {
            if (records.length === 0) {
                historyListEl.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üìù</div>
                        <div class="empty-text">ÊöÇÊó†ÊâìÂç°ËÆ∞ÂΩï</div>
                        <div class="empty-hint">ÁÇπÂáª‰∏äÊñπÊåâÈíÆÂºÄÂßãÊâìÂç°ÂêßÔºÅ</div>
                    </div>
                `;
                return;
            }

            // Âè™ÂèñÊúÄËøë10Ê¨°ËÆ∞ÂΩï
            const recentRecords = records.slice(0, 10);

            // ÊåâÊó•ÊúüÂàÜÁªÑ
            const grouped = {};
            recentRecords.forEach(record => {
                if (!grouped[record.date]) {
                    grouped[record.date] = [];
                }
                grouped[record.date].push(record);
            });

            // ÁîüÊàêHTML
            let html = '';

            // Â¶ÇÊûúÊúâÊõ¥Â§öËÆ∞ÂΩïÔºåÊòæÁ§∫ÊèêÁ§∫
            if (records.length > 10) {
                html += `
                    <div style="text-align: center; padding: 8px; color: var(--text-secondary); font-size: 10px; margin-bottom: 8px;">
                        ‰ªÖÊòæÁ§∫ÊúÄËøë 10 Ê¨°ÊâìÂç°ÔºàÂÖ± ${records.length} Ê¨°Ôºâ
                    </div>
                `;
            }

            for (const date in grouped) {
                const dayRecords = grouped[date];
                const isToday = date === new Date().toLocaleDateString('zh-CN');
                const dateLabel = isToday ? `${date} (‰ªäÂ§©)` : date;

                html += `<div class="history-group">
                    <div class="history-group-header">
                        <span class="group-date">${dateLabel}</span>
                        <span class="group-count">${dayRecords.length} ÊùØ</span>
                    </div>`;

                dayRecords.forEach(record => {
                    const index = records.findIndex(r => r.id === record.id) + 1;
                    html += `
                        <div class="history-item">
                            <div>
                                <div class="history-item-time">${record.time}</div>
                                <div class="history-item-date">Á¨¨ ${index} Ê¨°</div>
                            </div>
                            <div class="history-item-count">#${index}</div>
                        </div>
                    `;
                });

                html += '</div>';
            }

            historyListEl.innerHTML = html;
        }

        // Ê∏ÖÁ©∫ÂéÜÂè≤ËÆ∞ÂΩï
        function handleClearHistory() {
            if (confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâÊâìÂç°ËÆ∞ÂΩïÂêóÔºüÊ≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄ„ÄÇ')) {
                records = [];
                localStorage.removeItem('waterRecords');
                updateStats();
                renderHistory();
                showToast('ËÆ∞ÂΩïÂ∑≤Ê∏ÖÁ©∫');
            }
        }

        // ÊòæÁ§∫Toast
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.animation = 'toastOut 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 2000);
        }

        // ÂêØÂä®Â∫îÁî®
        init();
    </script>
</body>
</html>
